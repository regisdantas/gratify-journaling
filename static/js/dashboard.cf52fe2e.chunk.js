"use strict";(self.webpackChunkgratify_journaling=self.webpackChunkgratify_journaling||[]).push([[945],{7074:(n,e,t)=>{t.r(e),t.d(e,{default:()=>W});var o,r,i=t(5043),a=t(3293),s=t(2555),l=t(7528),c=t(4574);c.Ay.h1(o||(o=(0,l.A)(["\n  font-size: 36px;\n  color: #3a3a3a;\n"])));const d=c.Ay.div(r||(r=(0,l.A)(['\n  /* max-width: 400px; */\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0px;\n  margin: 10px 0px 0px 0px;\n\n  background-color: #eee;\n  border-radius: 5px;\n  border-left: 3px dashed lightgray;\n\n  div {\n    margin-left: 10px;\n    width: 100%;\n  }\n\n  .ContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    width: 100%;\n    border-radius: 5px 5px 0px 0px;\n    margin: 0;\n\n    .header {\n      width: 100%;\n      height: 44px;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      border-bottom: 1px solid lightgray;\n      padding: 10px;\n      gap: 20px;\n\n      svg {\n        margin: 0;\n        cursor: pointer;\n        height: 18px;\n      }\n    }\n\n    .titleBox {\n      height: 20px;\n    }\n  \n    .title {\n      display: flex;\n      align-items: flex-start;\n      border: 0px;\n      width: 100%;\n      text-align: justify;\n    }\n\n    .title:empty::before {\n      content: attr(data-placeholder);\n      color: lightgray;\n    }\n\n    .title:focus {\n      outline: none;\n    }\n\n    .toolbox {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      margin: 0px;\n      padding: 0px;\n      gap: 10px;\n    }\n  \n    select {\n      -webkit-appearance: none;\n      appearance: none;\n      background: transparent;\n      color: gray !important;\n      width: fit-content;\n      margin: 0px;\n      height: 30px;\n      color: black;\n      border: none;\n      padding: 0px;\n    }\n\n    strong {\n      color: darkgray;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      gap: 20px;\n    }\n\n    .ActionContainer {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin: 4px;\n      p {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        * {\n          margin-right: 5px;\n        }\n      }\n    }\n    /* body */\n    .reactMarkDown {\n      padding: 20px;\n      margin: 0px;\n      color: #000;\n      font: 13px "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;\n    }\n\n    /* links */\n    .reactMarkDown a:link {\n      color: #00f;\n      text-decoration: none;\n    }\n\n    .reactMarkDown a:visited {\n      color: #00a;\n      text-decoration: none;\n    }\n\n    .reactMarkDown a:hover {\n      color: #f60;\n      text-decoration: underline;\n    }\n\n    .reactMarkDown a:active {\n      color: #f60;\n      text-decoration: underline;\n    }\n\n    .reactMarkDown * html code {\n      font-size: 100%;\n    }\n\n    .reactMarkDown * html pre {\n      font-size: 101%;\n    }\n\n    /* code */\n\n    .reactMarkDown pre,\n    code {\n      font-size: 14px;\n      font-family: monaco, courier, consolas, monospace;\n      color: green;\n      font-style: italic;\n    }\n\n    .reactMarkDown pre {\n      margin-top: 5px;\n      margin-bottom: 10px;\n      border: 1px solid #c7cfd5;\n      background: #f1f5f9;\n      margin: 20px 0;\n      padding: 8px;\n      text-align: left;\n    }\n\n    .reactMarkDown hr {\n      color: #919699;\n      size: 1;\n      width: 100%;\n      noshade: "noshade";\n    }\n\n    /* headers */\n\n    .reactMarkDown h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n      font-family: "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;\n      font-weight: bold;\n    }\n\n    .reactMarkDown h1 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      color: #000;\n      font-weight: bold;\n      font-size: 22px;\n    }\n\n    .reactMarkDown h2 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 18px;\n      color: #000;\n      padding-bottom: 2px;\n    }\n\n    .reactMarkDown h3 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 13px;\n      color: #000;\n    }\n\n    .reactMarkDown h4 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 11px;\n      color: #000;\n    }\n\n    .reactMarkDown h5 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      padding: 0;\n      font-size: 11px;\n      color: #000;\n    }\n\n    .reactMarkDown h6 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      padding: 0;\n      font-size: 11px;\n      color: #000;\n    }\n\n    .reactMarkDown p {\n      margin-top: 0px;\n      margin-bottom: 10px;\n    }\n\n    /* lists */\n\n    .reactMarkDown ul {\n      list-style: square outside;\n      margin: 0 0 0 30px;\n      padding: 0 0 12px 6px;\n    }\n\n    .reactMarkDown li {\n      margin-top: 7px;\n    }\n\n    .reactMarkDown ol {\n      list-style-type: decimal;\n      list-style-position: outside;\n      margin: 0 0 0 30px;\n      padding: 0 0 12px 6px;\n    }\n\n    .reactMarkDown ol ol {\n      list-style-type: lower-alpha;\n      list-style-position: outside;\n      margin: 7px 0 0 30px;\n      padding: 0 0 0 10px;\n    }\n\n    .reactMarkDown ul ul {\n      margin-left: 40px;\n      padding: 0 0 0 6px;\n    }\n\n    .reactMarkDown li > p {\n      display: inline;\n    }\n    .reactMarkDown li > p + p {\n      display: block;\n    }\n    .reactMarkDown li > a + p {\n      display: block;\n    }\n\n    /* table */\n\n    .reactMarkDown table {\n      width: 100%;\n      border-top: 1px solid #919699;\n      border-left: 1px solid #919699;\n      border-spacing: 0;\n    }\n\n    .reactMarkDown table th {\n      padding: 4px 8px 4px 8px;\n      background: #e2e2e2;\n      font-size: 12px;\n      border-bottom: 1px solid #919699;\n      border-right: 1px solid #919699;\n    }\n    .reactMarkDown table th p {\n      font-weight: bold;\n      margin-bottom: 0px;\n    }\n\n    .reactMarkDown table td {\n      padding: 8px;\n      font-size: 12px;\n      vertical-align: top;\n      border-bottom: 1px solid #919699;\n      border-right: 1px solid #919699;\n    }\n    .reactMarkDown table td p {\n      margin-bottom: 0px;\n    }\n    .reactMarkDown table td p + p {\n      margin-top: 5px;\n    }\n    .reactMarkDown table td p + p + p {\n      margin-top: 5px;\n    }\n\n    /* forms */\n\n    .reactMarkDown form {\n      margin: 0;\n    }\n\n    .reactMarkDown button {\n      margin: 3px 0 10px 0;\n    }\n\n    .reactMarkDown input {\n      vertical-align: middle;\n      padding: 0;\n      margin: 0 0 5px 0;\n    }\n\n    .reactMarkDown select {\n      vertical-align: middle;\n      padding: 0;\n      margin: 0 0 3px 0;\n    }\n\n    .reactMarkDown textarea {\n      margin: 0 0 10px 0;\n      width: 100%;\n    }\n\n    .reactMarkDown img {\n      max-width: 45vw;\n    }\n\n    textarea {\n      width: 100%;\n      min-height: 100px;\n      resize: none;\n      overflow: hidden;\n      scrollbar-width: none;\n      margin: 10px;\n      padding: 20px;\n      border: none;\n      background: transparent;\n    }\n\n    textarea:focus {\n      border: none;\n      outline: none;\n      box-shadow: none;\n    }\n  }\n  .ContentContainer .date {\n    width: auto;\n    align-self: flex-end;\n    padding: 4px 10px 4px 10px;\n    color: gray;\n    align-items: flex-end;\n  }\n'])));var p=t(1009),x=t(5922),g=t(7149),u=t(5369);const h=n=>{try{JSON.parse(n)}catch(e){return!1}return!0},m=n=>{const e=n.split("-");return 3!==e.length?n:"".concat(e[2],"/").concat(e[1],"/").concat(e[0])};var f=t(4966),w=t(8742),k=t(3859),y=t(6801),b=t(242),v=t(285),A=t(809),D=t(8550),j=t(3596),M=t(5312),S=t.n(M);var C=t(579);const z={title:"",type:"record",text:"",color:"#fff",locked:!1,favorite:!1,pinned:!1},N=n=>{let{id:e,number:t,date:o,content:r,onDeleteCard:a,onChangeContent:l}=n;const{listening:c,transcript:M,startListening:N,stopListening:O}=function(){const[n,e]=(0,i.useState)(!1),[t,o]=(0,i.useState)(""),r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n)return void console.warn("SpeechRecognition API not supported");const t=new n;t.lang="pt-BR",t.continuous=!0,t.interimResults=!0,t.onresult=n=>{let e="";for(let t=0;t<n.results.length;t++)e+=n.results[t][0].transcript;o(e)},t.onend=()=>{e(!1)},r.current=t},[]),{listening:n,transcript:t,startListening:()=>{var n;null===(n=r.current)||void 0===n||n.start(),e(!0)},stopListening:()=>{var n;null===(n=r.current)||void 0===n||n.stop(),e(!1)}}}(),{speak:R,speaking:L,stopSpeaking:J}=function(){const[n,e]=(0,i.useState)(!1);return{speak:n=>{const t=new SpeechSynthesisUtterance(n);t.lang="pt-BR",t.onstart=()=>e(!0),t.onend=()=>e(!1),speechSynthesis.speak(t)},stopSpeaking:()=>{speechSynthesis.cancel(),e(!1)},speaking:n}}(),[U,E]=i.useState(!1),[T,P]=i.useState(!1),B=i.useRef(null);var G,H;G=B,H=()=>P(!1),(0,i.useEffect)(()=>{function n(n){G.current&&!G.current.contains(n.target)&&H()}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[G,H]);const F=h(r)?JSON.parse(r):(0,s.A)((0,s.A)({},z),{},{text:r}),[I,V]=i.useState(F.text||"");return(0,C.jsx)(d,{children:(0,C.jsxs)("div",{className:"ContentContainer",style:{backgroundColor:F.color||"#eee"},children:[(0,C.jsxs)("header",{className:"header",children:[(0,C.jsxs)("strong",{className:"titleBox",children:[F.pinned?(0,C.jsx)(f.eZN,{title:"Unpin note",size:18,onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{pinned:!1})))}):(0,C.jsx)(f.xi4,{title:"Pin note",size:18,onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{pinned:!0})))}),T?(0,C.jsx)("span",{className:"title"}):(0,C.jsx)("span",{className:"title",title:"Note name",role:"textbox",contentEditable:!0,"data-placeholder":"\ud83d\ude4b Give me a name",onInput:n=>((n,e)=>{const t=n.currentTarget;if(t.innerText.length>e){t.innerText=t.innerText.slice(0,e);const n=document.createRange(),o=window.getSelection();n.selectNodeContents(t),n.collapse(!1),null===o||void 0===o||o.removeAllRanges(),null===o||void 0===o||o.addRange(n)}})(n,40),onBlur:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{title:n.target.innerText}))),children:F.title})]}),(0,C.jsx)("span",{ref:B,className:"toolbox",children:T?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(p.Rrl,{size:18,title:"Speech note"}),L?(0,C.jsx)(p.cKW,{size:18,title:"Stop hearing note",onClick:J}):(0,C.jsx)(p.o77,{size:18,title:"Hear note",onClick:n=>R(I)}),(0,C.jsx)(x.iJU,{size:18}),F.favorite?(0,C.jsx)(u.gt3,{size:18,title:"Unfavorite note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{favorite:!1})))}):(0,C.jsx)(p.usP,{size:18,title:"Favorite note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{favorite:!0})))}),(0,C.jsx)(g.$di,{size:18,title:"Change note background color",onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{color:"#E3F2FD"})))}),(0,C.jsx)(p.MRc,{size:18,title:"Load template"}),(0,C.jsx)(x.iJU,{size:18}),(0,C.jsx)(p.IXo,{size:18,title:"Delete note",onClick:n=>a(e)}),F.locked?(0,C.jsx)(p.K4k,{size:18,title:"Unlock note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{locked:!1})))}):(0,C.jsx)(p.F5$,{size:18,title:"Lock note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{locked:!0})))})]}):(0,C.jsx)(p.VSk,{size:18,title:"Settings",onClick:()=>P(!T),onBlur:()=>P(!1)})})]}),U?(0,C.jsx)("textarea",{className:"reactMarkDown",placeholder:"* \u2753 What do you have for today?\n\n\n<markdown editor>",onFocus:n=>{const e=n.currentTarget;e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")},onChange:n=>{const e=n.currentTarget;e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),V(n.target.value)},autoFocus:!0,value:I||"",onBlur:n=>{l(e,JSON.stringify((0,s.A)((0,s.A)({},F),{},{text:I}))),E(!1)}}):(0,C.jsx)("div",{className:"reactMarkDown",onClick:()=>E(!0),children:(0,C.jsx)(w.oz,{children:I||"* \u2753 What do you have for today?",remarkPlugins:[[b.A,{padSpaceAfter:!1,emoticon:!0}],[D.A,{tight:!0,ordered:!0}],[k.A,{stringLength:S()}],v.A,A.A,j.A,y.A]})}),(0,C.jsx)("span",{className:"date",children:m(o)})]})},e)};var O,R,L,J=t(8222),U=t.n(J);const E=c.Ay.div(O||(O=(0,l.A)(["\n  width: 100%;\n  margin-top: 20px;\n  padding-bottom: 60px;\n"]))),T=c.Ay.div(R||(R=(0,l.A)(["\nposition: relative;\nbottom: 0px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  align-self: flex-end;\n  margin: 0px;\n  height: 35px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  background: #e0e0e5;\n  svg {\n    cursor: pointer;\n    margin: 0 10px 0 10px;\n    width: 20px;\n  }\n  input {\n    background: transparent;\n    height: auto;\n    border: none;\n      outline: none;\n    }\n\n    input:focus {\n      border: none;\n      outline: none;\n      box-shadow: none;\n    }\n"]))),P=c.Ay.div(L||(L=(0,l.A)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100px;\n"])));var B=t(1286),G=t(6667),H=t(9066),F=t(1952),I=t(7950);const V=n=>{let{children:e}=n;const t=document.getElementById("header-portal");return t?(0,I.createPortal)(e,t):null},_=t.p+"static/media/user.ae3a914be1e9f200b221.png",W=()=>{const{selectedDate:n,setSelectedDate:e,showAll:t,setShowAll:o}=(0,F.M)(),[r,s]=i.useState([]),{user:l,logOut:c}=(0,H.o)(),d=(new Date).toISOString().split("T")[0],x=i.useRef(null),g=t=>{const o=new Date(n);o.setDate(o.getDate()+t);const r=o.toISOString().split("T")[0];e(r),null!==x&&null!==x.current&&(x.current.value=r)};i.useEffect(()=>{!async function(){const n=(0,G.H9)(B.OO,"users",l.uid),e=(0,G.rJ)(n,"entries"),t=await(0,G.GG)(e),o=[];t.forEach(n=>{let e=n.data();e.createdAt||(e.createdAt=e.date),o.push(e)}),o.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),s(o)}()},[]);const u=()=>{window.scrollTo({top:0,behavior:"smooth"})},m=async n=>{const e=r.filter(e=>e.id!==n);s(e);const t=(0,G.H9)(B.OO,"users",l.uid),o=(0,G.rJ)(t,"entries"),i=(0,G.P)(o,(0,G._M)("id","==",n));(await(0,G.GG)(i)).forEach(n=>{(0,G.kd)((0,G.H9)(B.OO,"users/".concat(l.uid,"/entries"),n.id))})},f=async(n,e)=>{const t=r.map(t=>(t.id===n&&(t.content=e),t));s(t);const o=r.find(e=>e.id===n);if(o){o.content=e;const t=(0,G.H9)(B.OO,"users",l.uid),r=(0,G.rJ)(t,"entries"),i=(0,G.P)(r,(0,G._M)("id","==",n));(await(0,G.GG)(i)).forEach(n=>{(0,G.BN)((0,G.H9)(B.OO,"users/".concat(l.uid,"/entries"),n.id),o)})}};let w=0;return(0,C.jsxs)(a.Mt,{children:[(0,C.jsxs)(V,{children:[null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,C.jsxs)(T,{children:[(0,C.jsx)(p.kRp,{title:"Previous day",size:36,onClick:()=>g(-1)}),(0,C.jsx)("input",{title:"Select date",ref:x,type:"date",defaultValue:d,onChange:n=>{e(n.target.value)}}),(0,C.jsx)(p.dyV,{title:"Next day",size:36,onClick:()=>g(1)}),t?(0,C.jsx)(p._NO,{title:"Show only selected day",size:36,onClick:()=>o(!1)}):(0,C.jsx)(p.Vap,{title:"Show all notes",size:36,onClick:()=>o(!0)})]}):null,null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,C.jsx)(P,{children:(0,C.jsx)("img",{title:"Logout",src:l.photoURL?l.photoURL:_,onError:n=>{let{currentTarget:e}=n;e.onerror=null,e.src=_},alt:"User photograph",onClick:()=>(async()=>{try{await c()}catch(n){console.log(n)}})()})}):null]}),(0,C.jsxs)(a.A9,{children:[(0,C.jsx)(E,{children:r.map((e,o)=>t||e.date===n||h(e.content)&&!0===JSON.parse(e.content).pinned?(0,C.jsx)(N,{id:e.id,date:e.date,number:w+=1,content:e.content,onDeleteCard:m,onChangeContent:f},e.id):(0,C.jsx)("div",{},e.id))}),(0,C.jsx)(a.ru,{title:"Add new note",color:"#04d361",onClick:async function(e){const t={uid:l.uid,id:U()(),content:"",date:n,createdAt:(new Date).toISOString()};u();const o=[...r,t];o.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),s(o);const i=(0,G.H9)(B.OO,"users",l.uid),a=(0,G.rJ)(i,"entries");await(0,G.gS)(a,t)},children:"+"})]})]})}}}]);
//# sourceMappingURL=dashboard.cf52fe2e.chunk.js.map