"use strict";(self.webpackChunkgratify_journaling=self.webpackChunkgratify_journaling||[]).push([[945],{7074:(n,e,t)=>{t.r(e),t.d(e,{default:()=>q});var o,i,r=t(5043),a=t(3293),s=t(2555),l=t(7528),c=t(4574);c.Ay.h1(o||(o=(0,l.A)(["\n  font-size: 36px;\n  color: #3a3a3a;\n"])));const d=c.Ay.div(i||(i=(0,l.A)(['\n  /* max-width: 400px; */\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0px;\n  margin: 10px 0px 0px 0px;\n\n  background-color: #eee;\n  border-radius: 5px;\n  border-left: 3px dashed lightgray;\n\n  div {\n    margin-left: 10px;\n    width: 100%;\n  }\n\n  .ContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    width: 100%;\n    border-radius: 5px 5px 0px 0px;\n    margin: 0;\n\n    .header {\n      width: 100%;\n      height: 44px;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      border-bottom: 1px solid lightgray;\n      padding: 10px;\n      gap: 20px;\n\n      svg {\n        margin: 0;\n        cursor: pointer;\n        height: 18px;\n      }\n    }\n\n    .titleBox {\n      height: 20px;\n    }\n  \n    .title {\n      display: flex;\n      align-items: flex-start;\n      border: 0px;\n      width: 100%;\n      text-align: justify;\n    }\n\n    .title:empty::before {\n      content: attr(data-placeholder);\n      color: lightgray;\n    }\n\n    .title:focus {\n      outline: none;\n    }\n\n    .toolbox {\n      width: auto;\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      margin: 0px;\n      padding: 0px;\n      gap: 10px;\n    }\n  \n    select {\n      -webkit-appearance: none;\n      appearance: none;\n      background: transparent;\n      color: gray !important;\n      width: fit-content;\n      margin: 0px;\n      height: 30px;\n      color: black;\n      border: none;\n      padding: 0px;\n    }\n\n    strong {\n      color: black;\n      width: 100%;\n      display: flex;\n      align-items: center;\n      gap: 20px;\n    }\n\n    .ActionContainer {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin: 4px;\n      p {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        * {\n          margin-right: 5px;\n        }\n      }\n    }\n    /* body */\n    .reactMarkDown {\n      padding: 20px;\n      margin: 0px;\n      color: #000;\n      font: 13px "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;\n    }\n\n    /* links */\n    .reactMarkDown a:link {\n      color: #00f;\n      text-decoration: none;\n    }\n\n    .reactMarkDown a:visited {\n      color: #00a;\n      text-decoration: none;\n    }\n\n    .reactMarkDown a:hover {\n      color: #f60;\n      text-decoration: underline;\n    }\n\n    .reactMarkDown a:active {\n      color: #f60;\n      text-decoration: underline;\n    }\n\n    .reactMarkDown * html code {\n      font-size: 100%;\n    }\n\n    .reactMarkDown * html pre {\n      font-size: 101%;\n    }\n\n    /* code */\n\n    .reactMarkDown pre,\n    code {\n      font-size: 14px;\n      font-family: monaco, courier, consolas, monospace;\n      color: green;\n      font-style: italic;\n    }\n\n    .reactMarkDown pre {\n      margin-top: 5px;\n      margin-bottom: 10px;\n      border: 1px solid #c7cfd5;\n      background: #f1f5f9;\n      margin: 20px 0;\n      padding: 8px;\n      text-align: left;\n    }\n\n    .reactMarkDown hr {\n      color: #919699;\n      size: 1;\n      width: 100%;\n      noshade: "noshade";\n    }\n\n    /* headers */\n\n    .reactMarkDown h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n      font-family: "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;\n      font-weight: bold;\n    }\n\n    .reactMarkDown h1 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      color: #000;\n      font-weight: bold;\n      font-size: 22px;\n    }\n\n    .reactMarkDown h2 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 18px;\n      color: #000;\n      padding-bottom: 2px;\n    }\n\n    .reactMarkDown h3 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 13px;\n      color: #000;\n    }\n\n    .reactMarkDown h4 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 11px;\n      color: #000;\n    }\n\n    .reactMarkDown h5 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      padding: 0;\n      font-size: 11px;\n      color: #000;\n    }\n\n    .reactMarkDown h6 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      padding: 0;\n      font-size: 11px;\n      color: #000;\n    }\n\n    .reactMarkDown p {\n      margin-top: 0px;\n      margin-bottom: 10px;\n    }\n\n    /* lists */\n\n    .reactMarkDown ul {\n      list-style: square outside;\n      margin: 0 0 0 30px;\n      padding: 0 0 12px 6px;\n    }\n\n    .reactMarkDown li {\n      margin-top: 7px;\n    }\n\n    .reactMarkDown ol {\n      list-style-type: decimal;\n      list-style-position: outside;\n      margin: 0 0 0 30px;\n      padding: 0 0 12px 6px;\n    }\n\n    .reactMarkDown ol ol {\n      list-style-type: lower-alpha;\n      list-style-position: outside;\n      margin: 7px 0 0 30px;\n      padding: 0 0 0 10px;\n    }\n\n    .reactMarkDown ul ul {\n      margin-left: 40px;\n      padding: 0 0 0 6px;\n    }\n\n    .reactMarkDown li > p {\n      display: inline;\n    }\n    .reactMarkDown li > p + p {\n      display: block;\n    }\n    .reactMarkDown li > a + p {\n      display: block;\n    }\n\n    /* table */\n\n    .reactMarkDown table {\n      width: 100%;\n      border-top: 1px solid #919699;\n      border-left: 1px solid #919699;\n      border-spacing: 0;\n    }\n\n    .reactMarkDown table th {\n      padding: 4px 8px 4px 8px;\n      background: #e2e2e2;\n      font-size: 12px;\n      border-bottom: 1px solid #919699;\n      border-right: 1px solid #919699;\n    }\n    .reactMarkDown table th p {\n      font-weight: bold;\n      margin-bottom: 0px;\n    }\n\n    .reactMarkDown table td {\n      padding: 8px;\n      font-size: 12px;\n      vertical-align: top;\n      border-bottom: 1px solid #919699;\n      border-right: 1px solid #919699;\n    }\n    .reactMarkDown table td p {\n      margin-bottom: 0px;\n    }\n    .reactMarkDown table td p + p {\n      margin-top: 5px;\n    }\n    .reactMarkDown table td p + p + p {\n      margin-top: 5px;\n    }\n\n    /* forms */\n\n    .reactMarkDown form {\n      margin: 0;\n    }\n\n    .reactMarkDown button {\n      margin: 3px 0 10px 0;\n    }\n\n    .reactMarkDown input[type="checkbox"] {\n      display: inline-block;\n      vertical-align: start;\n      margin: 0 6px 0 0;\n      width: 14px;\n      height: 14px;\n    }\n\n    .reactMarkDown select {\n      vertical-align: middle;\n      padding: 0;\n      margin: 0 0 3px 0;\n    }\n\n    .reactMarkDown textarea {\n      margin: 0 0 10px 0;\n      width: 100%;\n    }\n\n    .reactMarkDown img {\n      max-width: 45vw;\n    }\n\n    textarea {\n      touch-action: manipulation;\n      -webkit-text-size-adjust: 100%;\n\n      width: 100%;\n      min-height: 100px;\n      resize: none;\n      overflow: hidden;\n      scrollbar-width: none;\n      margin: 10px;\n      padding: 20px;\n      border: none;\n      background: transparent;\n    }\n\n    textarea:focus {\n      border: none;\n      outline: none;\n      box-shadow: none;\n    }\n  }\n  .ContentContainer .date {\n    width: auto;\n    align-self: flex-end;\n    padding: 4px 10px 4px 10px;\n    color: gray;\n    align-items: flex-end;\n  }\n'])));var p=t(1009),x=t(5922),g=t(7149),u=t(5369),h=t(4960);const m=n=>{try{JSON.parse(n)}catch(e){return!1}return!0},f=n=>{const e=n.split("-");return 3!==e.length?n:"".concat(e[2],"/").concat(e[1],"/").concat(e[0])};var w=t(4966),k=t(8742),y=t(3859),b=t(6801),A=t(242),v=t(285),j=t(809),D=t(8550),M=t(3596),S=t(5312),C=t.n(S);var z=t(579);const N={title:"",type:"record",text:"",color:"#fff",locked:!1,favorite:!1,pinned:!1,collapsed:!1},O=n=>{let{id:e,number:t,date:o,content:i,onDeleteCard:a,onChangeContent:l}=n;const{listening:c,transcript:S,startListening:O,stopListening:R}=function(){const[n,e]=(0,r.useState)(!1),[t,o]=(0,r.useState)(""),i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n)return void console.warn("SpeechRecognition API not supported");const t=new n;t.lang="pt-BR",t.continuous=!0,t.interimResults=!0,t.onresult=n=>{let e="";for(let t=0;t<n.results.length;t++)e+=n.results[t][0].transcript;o(e)},t.onend=()=>{e(!1)},i.current=t},[]),{listening:n,transcript:t,startListening:()=>{var n;null===(n=i.current)||void 0===n||n.start(),e(!0)},stopListening:()=>{var n;null===(n=i.current)||void 0===n||n.stop(),e(!1)}}}(),{speak:J,speaking:L,stopSpeaking:E}=function(){const[n,e]=(0,r.useState)(!1);return{speak:n=>{const t=new SpeechSynthesisUtterance(n);t.lang="pt-BR",t.onstart=()=>e(!0),t.onend=()=>e(!1),speechSynthesis.speak(t)},stopSpeaking:()=>{speechSynthesis.cancel(),e(!1)},speaking:n}}(),[U,T]=r.useState(!1),[B,F]=r.useState(!1),P=r.useRef(null);var G,H;G=P,H=()=>F(!1),(0,r.useEffect)(()=>{function n(n){G.current&&!G.current.contains(n.target)&&H()}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[G,H]);const I=m(i)?JSON.parse(i):(0,s.A)((0,s.A)({},N),{},{text:i}),[V,_]=r.useState(I.text||"");return(0,z.jsx)(d,{children:(0,z.jsxs)("div",{className:"ContentContainer",style:{backgroundColor:I.color||"#eee"},children:[(0,z.jsxs)("header",{className:"header",children:[(0,z.jsxs)("strong",{className:"titleBox",children:[I.pinned?(0,z.jsx)(w.eZN,{title:"Unpin note",size:18,onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{pinned:!1})))}):(0,z.jsx)(w.xi4,{title:"Pin note",size:18,onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{pinned:!0})))}),B?(0,z.jsx)("span",{className:"title"}):(0,z.jsx)("span",{className:"title",title:"Note name",role:"textbox",contentEditable:!0,"data-placeholder":"\ud83d\ude4b Give me a name",onInput:n=>((n,e)=>{const t=n.currentTarget;if(t.innerText.length>e){t.innerText=t.innerText.slice(0,e);const n=document.createRange(),o=window.getSelection();n.selectNodeContents(t),n.collapse(!1),null===o||void 0===o||o.removeAllRanges(),null===o||void 0===o||o.addRange(n)}})(n,40),onBlur:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{title:n.target.innerText}))),children:I.title})]}),(0,z.jsxs)("span",{ref:P,className:"toolbox",children:[B?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(p.Rrl,{size:18,title:"Speech note"}),L?(0,z.jsx)(p.cKW,{size:18,title:"Stop hearing note",onClick:E}):(0,z.jsx)(p.o77,{size:18,title:"Hear note",onClick:n=>J(V)}),(0,z.jsx)(x.iJU,{size:18}),I.favorite?(0,z.jsx)(u.gt3,{size:18,title:"Unfavorite note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{favorite:!1})))}):(0,z.jsx)(p.usP,{size:18,title:"Favorite note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{favorite:!0})))}),I.locked?(0,z.jsx)(p.K4k,{size:18,title:"Unlock note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{locked:!1})))}):(0,z.jsx)(p.F5$,{size:18,title:"Lock note",onClick:n=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{locked:!0})))}),(0,z.jsx)(g.$di,{size:18,title:"Change note background color",onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{color:"#E3F2FD"})))}),(0,z.jsx)(p.MRc,{size:18,title:"Load template"}),(0,z.jsx)(x.iJU,{size:18}),(0,z.jsx)(p.IXo,{size:18,title:"Delete note",onClick:n=>a(e)})]}):(0,z.jsx)(z.Fragment,{}),(0,z.jsx)(p.X3y,{size:18,title:"Tool Box",onClick:()=>F(!B),onBlur:()=>F(!1)}),I.collapsed?(0,z.jsx)(h.BSQ,{size:18,title:"Expand note",onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{collapsed:!1})))}):(0,z.jsx)(h.q2p,{size:18,title:"Collapse note",onClick:()=>l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{collapsed:!0})))})]})]}),I.collapsed?(0,z.jsx)(z.Fragment,{}):(0,z.jsx)(z.Fragment,{children:U?(0,z.jsx)("textarea",{className:"reactMarkDown",placeholder:"* \u2753 What do you have for today?\n\n\n<markdown editor>",onFocus:n=>{const e=n.currentTarget;e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")},onChange:n=>{const e=n.currentTarget;e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),_(n.target.value)},autoFocus:!0,value:V||"",onBlur:n=>{l(e,JSON.stringify((0,s.A)((0,s.A)({},I),{},{text:V}))),T(!1)}}):(0,z.jsx)("div",{className:"reactMarkDown",onClick:()=>T(!0),children:(0,z.jsx)(k.oz,{children:V||"* \u2753 What do you have for today?",remarkPlugins:[[A.A,{padSpaceAfter:!1,emoticon:!0}],[D.A,{tight:!0,ordered:!0}],[y.A,{stringLength:C()}],v.A,j.A,M.A,b.A]})})}),(0,z.jsx)("span",{className:"date",children:f(o)})]})},e)};var R,J,L,E=t(8222),U=t.n(E);const T=c.Ay.div(R||(R=(0,l.A)(["\n  width: 100%;\n  margin-top: 20px;\n  padding-bottom: 60px;\n"]))),B=c.Ay.div(J||(J=(0,l.A)(["\nposition: relative;\nbottom: 0px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  align-self: flex-end;\n  margin: 0px;\n  height: 35px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  background: #e0e0e5;\n  svg {\n    cursor: pointer;\n    margin: 0 10px 0 10px;\n    width: 30px;\n  }\n  input {\n    background: transparent;\n    height: auto;\n    border: none;\n      outline: none;\n    }\n\n    input:focus {\n      border: none;\n      outline: none;\n      box-shadow: none;\n    }\n"]))),F=c.Ay.div(L||(L=(0,l.A)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100px;\n"])));var P=t(1286),G=t(6667),H=t(9066),I=t(1952),V=t(7950);const _=n=>{let{children:e}=n;const t=document.getElementById("header-portal");return t?(0,V.createPortal)(e,t):null},W=t.p+"static/media/user.ae3a914be1e9f200b221.png",q=()=>{const{selectedDate:n,setSelectedDate:e,showAll:t,setShowAll:o}=(0,I.M)(),[i,s]=r.useState([]),{user:l,logOut:c}=(0,H.o)(),d=(new Date).toISOString().split("T")[0],x=r.useRef(null),g=t=>{const o=new Date(n);o.setDate(o.getDate()+t);const i=o.toISOString().split("T")[0];e(i),null!==x&&null!==x.current&&(x.current.value=i)};r.useEffect(()=>{!async function(){const n=(0,G.H9)(P.OO,"users",l.uid),e=(0,G.rJ)(n,"entries"),t=await(0,G.GG)(e),o=[];t.forEach(n=>{let e=n.data();e.createdAt||(e.createdAt=e.date),o.push(e)}),o.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),s(o)}()},[]);const u=()=>{window.scrollTo({top:0,behavior:"smooth"})},h=async n=>{const e=i.filter(e=>e.id!==n);s(e);const t=(0,G.H9)(P.OO,"users",l.uid),o=(0,G.rJ)(t,"entries"),r=(0,G.P)(o,(0,G._M)("id","==",n));(await(0,G.GG)(r)).forEach(n=>{(0,G.kd)((0,G.H9)(P.OO,"users/".concat(l.uid,"/entries"),n.id))})},f=async(n,e)=>{const t=i.map(t=>(t.id===n&&(t.content=e),t));s(t);const o=i.find(e=>e.id===n);if(o){o.content=e;const t=(0,G.H9)(P.OO,"users",l.uid),i=(0,G.rJ)(t,"entries"),r=(0,G.P)(i,(0,G._M)("id","==",n));(await(0,G.GG)(r)).forEach(n=>{(0,G.BN)((0,G.H9)(P.OO,"users/".concat(l.uid,"/entries"),n.id),o)})}};let w=0;return(0,z.jsxs)(a.Mt,{children:[(0,z.jsxs)(_,{children:[null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,z.jsxs)(B,{children:[(0,z.jsx)(p.kRp,{title:"Previous day",size:36,onClick:()=>g(-1)}),(0,z.jsx)("input",{title:"Select date",ref:x,type:"date",defaultValue:d,onChange:n=>{e(n.target.value)}}),(0,z.jsx)(p.dyV,{title:"Next day",size:36,onClick:()=>g(1)}),t?(0,z.jsx)(p._NO,{title:"Show only selected day",size:36,onClick:()=>o(!1)}):(0,z.jsx)(p.Vap,{title:"Show all notes",size:36,onClick:()=>o(!0)})]}):null,null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,z.jsx)(F,{children:(0,z.jsx)("img",{title:"Logout",src:l.photoURL?l.photoURL:W,onError:n=>{let{currentTarget:e}=n;e.onerror=null,e.src=W},alt:"User photograph",onClick:()=>(async()=>{try{await c()}catch(n){console.log(n)}})()})}):null]}),(0,z.jsxs)(a.A9,{children:[(0,z.jsx)(T,{children:i.map((e,o)=>t||e.date===n||m(e.content)&&!0===JSON.parse(e.content).pinned?(0,z.jsx)(O,{id:e.id,date:e.date,number:w+=1,content:e.content,onDeleteCard:h,onChangeContent:f},e.id):(0,z.jsx)("div",{},e.id))}),(0,z.jsx)(a.ru,{title:"Add new note",color:"#04d361",onClick:async function(e){const t={uid:l.uid,id:U()(),content:"",date:n,createdAt:(new Date).toISOString()};u();const o=[...i,t];o.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),s(o);const r=(0,G.H9)(P.OO,"users",l.uid),a=(0,G.rJ)(r,"entries");await(0,G.gS)(a,t)},children:"+"})]})]})}}}]);
//# sourceMappingURL=dashboard.c5f89fea.chunk.js.map