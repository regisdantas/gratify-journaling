"use strict";(self.webpackChunkgratify_journaling=self.webpackChunkgratify_journaling||[]).push([[945],{9701:(n,e,t)=>{t.r(e),t.d(e,{default:()=>_});var o,r,a=t(5043),i=t(3293),d=t(2555),l=t(7528),c=t(4574);c.Ay.h1(o||(o=(0,l.A)(["\n  font-size: 36px;\n  color: #3a3a3a;\n"])));const s=c.Ay.div(r||(r=(0,l.A)(['\n  /* max-width: 400px; */\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  padding: 0px;\n  margin: 10px 0px 0px 0px;\n\n  background-color: #eee;\n  border-radius: 5px;\n  border-left: 3px dashed lightgray;\n\n  div {\n    margin-left: 10px;\n    width: 100%;\n  }\n\n  .ContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n    width: 100%;\n    border-radius: 5px 5px 0px 0px;\n    margin: 0;\n    background: #fff;\n\n    header {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n\n      svg {\n        margin: 10px;\n        cursor: pointer;\n      }\n    }\n\n    span {\n      display: flex;\n      padding: 0;\n      margin: 0;\n      gap: 5px;\n      align-items: center;\n    }\n    select {\n      -webkit-appearance: none;\n      appearance: none;\n      background: transparent;\n      color: gray !important;\n      width: fit-content;\n      margin: 0px;\n      height: 30px;\n      color: black;\n      border: none;\n      padding: 0px;\n    }\n\n    strong {\n      color: darkgray;\n      width: 100%;\n      display: flex;\n      align-items: center;\n    }\n\n    span {\n      border: 0px;\n      padding: 10px;\n      width: 100%;\n      text-align: justify;\n    }\n\n    span:empty::before {\n      content: attr(data-placeholder);\n      color: lightgray;\n    }\n\n    span:focus {\n      outline: none;\n    }\n\n    .ActionContainer {\n      width: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-around;\n      margin: 4px;\n      p {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        * {\n          margin-right: 5px;\n        }\n      }\n    }\n    /* body */\n    .reactMarkDown {\n      padding: 0px 20px 0px 20px;\n      margin: 0px;\n      color: #000;\n      font: 13px "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;\n    }\n\n    /* links */\n    .reactMarkDown a:link {\n      color: #00f;\n      text-decoration: none;\n    }\n\n    .reactMarkDown a:visited {\n      color: #00a;\n      text-decoration: none;\n    }\n\n    .reactMarkDown a:hover {\n      color: #f60;\n      text-decoration: underline;\n    }\n\n    .reactMarkDown a:active {\n      color: #f60;\n      text-decoration: underline;\n    }\n\n    .reactMarkDown * html code {\n      font-size: 100%;\n    }\n\n    .reactMarkDown * html pre {\n      font-size: 101%;\n    }\n\n    /* code */\n\n    .reactMarkDown pre,\n    code {\n      font-size: 14px;\n      font-family: monaco, courier, consolas, monospace;\n      color: green;\n      font-style: italic;\n    }\n\n    .reactMarkDown pre {\n      margin-top: 5px;\n      margin-bottom: 10px;\n      border: 1px solid #c7cfd5;\n      background: #f1f5f9;\n      margin: 20px 0;\n      padding: 8px;\n      text-align: left;\n    }\n\n    .reactMarkDown hr {\n      color: #919699;\n      size: 1;\n      width: 100%;\n      noshade: "noshade";\n    }\n\n    /* headers */\n\n    .reactMarkDown h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n      font-family: "Myriad Pro", "Lucida Grande", Lucida, Verdana, sans-serif;\n      font-weight: bold;\n    }\n\n    .reactMarkDown h1 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      color: #000;\n      font-weight: bold;\n      font-size: 30px;\n    }\n\n    .reactMarkDown h2 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 24px;\n      color: #000;\n      padding-bottom: 2px;\n    }\n\n    .reactMarkDown h3 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 17px;\n      color: #000;\n    }\n\n    .reactMarkDown h4 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      font-size: 15px;\n      color: #000;\n    }\n\n    .reactMarkDown h5 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      padding: 0;\n      font-size: 13px;\n      color: #000;\n    }\n\n    .reactMarkDown h6 {\n      margin-top: 1em;\n      margin-bottom: 1em;\n      padding: 0;\n      font-size: 11px;\n      color: #000;\n    }\n\n    .reactMarkDown p {\n      margin-top: 0px;\n      margin-bottom: 10px;\n    }\n\n    /* lists */\n\n    .reactMarkDown ul {\n      list-style: square outside;\n      margin: 0 0 0 30px;\n      padding: 0 0 12px 6px;\n    }\n\n    .reactMarkDown li {\n      margin-top: 7px;\n    }\n\n    .reactMarkDown ol {\n      list-style-type: decimal;\n      list-style-position: outside;\n      margin: 0 0 0 30px;\n      padding: 0 0 12px 6px;\n    }\n\n    .reactMarkDown ol ol {\n      list-style-type: lower-alpha;\n      list-style-position: outside;\n      margin: 7px 0 0 30px;\n      padding: 0 0 0 10px;\n    }\n\n    .reactMarkDown ul ul {\n      margin-left: 40px;\n      padding: 0 0 0 6px;\n    }\n\n    .reactMarkDown li > p {\n      display: inline;\n    }\n    .reactMarkDown li > p + p {\n      display: block;\n    }\n    .reactMarkDown li > a + p {\n      display: block;\n    }\n\n    /* table */\n\n    .reactMarkDown table {\n      width: 100%;\n      border-top: 1px solid #919699;\n      border-left: 1px solid #919699;\n      border-spacing: 0;\n    }\n\n    .reactMarkDown table th {\n      padding: 4px 8px 4px 8px;\n      background: #e2e2e2;\n      font-size: 12px;\n      border-bottom: 1px solid #919699;\n      border-right: 1px solid #919699;\n    }\n    .reactMarkDown table th p {\n      font-weight: bold;\n      margin-bottom: 0px;\n    }\n\n    .reactMarkDown table td {\n      padding: 8px;\n      font-size: 12px;\n      vertical-align: top;\n      border-bottom: 1px solid #919699;\n      border-right: 1px solid #919699;\n    }\n    .reactMarkDown table td p {\n      margin-bottom: 0px;\n    }\n    .reactMarkDown table td p + p {\n      margin-top: 5px;\n    }\n    .reactMarkDown table td p + p + p {\n      margin-top: 5px;\n    }\n\n    /* forms */\n\n    .reactMarkDown form {\n      margin: 0;\n    }\n\n    .reactMarkDown button {\n      margin: 3px 0 10px 0;\n    }\n\n    .reactMarkDown input {\n      vertical-align: middle;\n      padding: 0;\n      margin: 0 0 5px 0;\n    }\n\n    .reactMarkDown select {\n      vertical-align: middle;\n      padding: 0;\n      margin: 0 0 3px 0;\n    }\n\n    .reactMarkDown textarea {\n      margin: 0 0 10px 0;\n      width: 100%;\n    }\n\n    .reactMarkDown img {\n      max-width: 45vw;\n    }\n\n    textarea {\n      width: 100%;\n      min-height: 100px;\n      resize: none;\n      overflow: hidden;\n      scrollbar-width: none;\n      margin: 10px;\n      padding: 20px;\n      border: none;\n    }\n\n    textarea:focus {\n      border: none;\n      outline: none;\n      box-shadow: none;\n    }\n  }\n  .ContentContainer .date {\n    width: auto;\n    align-self: flex-end;\n    padding: 4px 10px 4px 10px;\n    color: gray;\n    align-items: flex-end;\n  }\n'])));var p=t(1009);const x=n=>{try{JSON.parse(n)}catch(e){return!1}return!0},g=n=>{const e=n.split("-");return 3!==e.length?n:"".concat(e[2],"/").concat(e[1],"/").concat(e[0])};var u=t(4966),h=t(8742),m=t(3859),f=t(6801),w=t(242),b=t(285),k=t(809),y=t(8550),D=t(3596),M=t(5312),A=t.n(M),v=t(579);const j={title:"",type:"record",text:"",color:"red",pinned:!1},C=n=>{let{id:e,number:t,date:o,content:r,onDeleteCard:i,onChangeContent:l}=n;a.useRef(null);const c=a.useRef(null),[M,C]=a.useState(!1),O=x(r)?JSON.parse(r):(0,d.A)((0,d.A)({},j),{},{text:r}),[S,z]=a.useState(O.text||"");return(0,v.jsx)(s,{color:O.color,children:(0,v.jsxs)("div",{className:"ContentContainer",children:[(0,v.jsxs)("header",{children:[(0,v.jsxs)("strong",{children:[O.pinned?(0,v.jsx)(u.eZN,{title:"Unpin note",size:24,onClick:()=>l(e,JSON.stringify((0,d.A)((0,d.A)({},O),{},{pinned:!1})))}):(0,v.jsx)(u.xi4,{title:"Pin note",size:24,onClick:()=>l(e,JSON.stringify((0,d.A)((0,d.A)({},O),{},{pinned:!0})))}),(0,v.jsx)("strong",{children:(0,v.jsx)("span",{title:"Note name",ref:c,role:"textbox",contentEditable:!0,"data-placeholder":"Give me a name",onBlur:n=>l(e,JSON.stringify((0,d.A)((0,d.A)({},O),{},{title:n.target.innerText}))),children:O.title})})]}),(0,v.jsx)(p.IXo,{title:"Delete note",onClick:n=>i(e)})]}),M?(0,v.jsx)("textarea",{placeholder:"What do you have for today?",onFocus:n=>{const e=n.currentTarget;e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")},onChange:n=>{const e=n.currentTarget;e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),z(n.target.value)},autoFocus:!0,value:S||"",onBlur:n=>{l(e,JSON.stringify((0,d.A)((0,d.A)({},O),{},{text:S}))),C(!1)},className:"w-full p-2 border rounded"}):(0,v.jsx)("div",{className:"reactMarkDown",onClick:()=>C(!0),children:(0,v.jsx)(h.oz,{children:S||"What do you have for today?",remarkPlugins:[[w.A,{padSpaceAfter:!1,emoticon:!0}],[y.A,{tight:!0,ordered:!0}],[m.A,{stringLength:A()}],b.A,k.A,D.A,f.A]})}),(0,v.jsx)("span",{className:"date",children:g(o)})]})},e)};var O,S,z,N=t(8222),L=t.n(N);const J=c.Ay.div(O||(O=(0,l.A)(["\n  width: 100%;\n  margin-top: 20px;\n  padding-bottom: 60px;\n"]))),R=c.Ay.div(S||(S=(0,l.A)(["\nposition: relative;\nbottom: 0px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  align-self: flex-end;\n  margin: 0px;\n  height: 35px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  background: #e0e0e5;\n  svg {\n    cursor: pointer;\n    margin: 0 10px 0 10px;\n    width: 20px;\n  }\n  input {\n    background: transparent;\n    height: auto;\n    border: none;\n      outline: none;\n    }\n\n    input:focus {\n      border: none;\n      outline: none;\n      box-shadow: none;\n    }\n"]))),G=c.Ay.div(z||(z=(0,l.A)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100px;\n"])));var H=t(1286),P=t(6667),U=t(9066),E=t(1952),T=t(7950);const I=n=>{let{children:e}=n;const t=document.getElementById("header-portal");return t?(0,T.createPortal)(e,t):null},V=t.p+"static/media/user.ae3a914be1e9f200b221.png",_=()=>{const{selectedDate:n,setSelectedDate:e,showAll:t,setShowAll:o}=(0,E.M)(),[r,d]=a.useState([]),{user:l,logOut:c}=(0,U.o)(),s=(new Date).toISOString().split("T")[0],g=a.useRef(null),u=t=>{const o=new Date(n);o.setDate(o.getDate()+t);const r=o.toISOString().split("T")[0];e(r),null!==g&&null!==g.current&&(g.current.value=r)};a.useEffect(()=>{!async function(){const n=(0,P.H9)(H.OO,"users",l.uid),e=(0,P.rJ)(n,"entries"),t=await(0,P.GG)(e),o=[];t.forEach(n=>{let e=n.data();e.createdAt||(e.createdAt=e.date),o.push(e)}),o.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),d(o)}()},[]);const h=()=>{window.scrollTo({top:0,behavior:"smooth"})},m=async n=>{const e=r.filter(e=>e.id!==n);d(e);const t=(0,P.H9)(H.OO,"users",l.uid),o=(0,P.rJ)(t,"entries"),a=(0,P.P)(o,(0,P._M)("id","==",n));(await(0,P.GG)(a)).forEach(n=>{(0,P.kd)((0,P.H9)(H.OO,"users/".concat(l.uid,"/entries"),n.id))})},f=async(n,e)=>{const t=r.map(t=>(t.id===n&&(t.content=e),t));d(t);const o=r.find(e=>e.id===n);if(o){o.content=e;const t=(0,P.H9)(H.OO,"users",l.uid),r=(0,P.rJ)(t,"entries"),a=(0,P.P)(r,(0,P._M)("id","==",n));(await(0,P.GG)(a)).forEach(n=>{(0,P.BN)((0,P.H9)(H.OO,"users/".concat(l.uid,"/entries"),n.id),o)})}};let w=0;return(0,v.jsxs)(i.Mt,{children:[(0,v.jsxs)(I,{children:[null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,v.jsxs)(R,{children:[(0,v.jsx)(p.kRp,{title:"Previous day",size:36,onClick:()=>u(-1)}),(0,v.jsx)("input",{title:"Select date",ref:g,type:"date",defaultValue:s,onChange:n=>{e(n.target.value)}}),(0,v.jsx)(p.dyV,{title:"Next day",size:36,onClick:()=>u(1)}),t?(0,v.jsx)(p._NO,{title:"Show only selected day",size:36,onClick:()=>o(!1)}):(0,v.jsx)(p.Vap,{title:"Show all notes",size:36,onClick:()=>o(!0)})]}):null,null!==l&&void 0!==l.displayName&&null!==l.photoURL&&void 0!==l.photoURL?(0,v.jsx)(G,{children:(0,v.jsx)("img",{title:"Logout",src:l.photoURL?l.photoURL:V,onError:n=>{let{currentTarget:e}=n;e.onerror=null,e.src=V},alt:"User photograph",onClick:()=>(async()=>{try{await c()}catch(n){console.log(n)}})()})}):null]}),(0,v.jsxs)(i.A9,{children:[(0,v.jsx)(J,{children:r.map((e,o)=>t||e.date===n||x(e.content)&&!0===JSON.parse(e.content).pinned?(0,v.jsx)(C,{id:e.id,date:e.date,number:w+=1,content:e.content,onDeleteCard:m,onChangeContent:f},e.id):(0,v.jsx)("div",{},e.id))}),(0,v.jsx)(i.ru,{title:"Add new note",color:"#04d361",onClick:async function(e){const t={uid:l.uid,id:L()(),content:"",date:n,createdAt:(new Date).toISOString()};h();const o=[...r,t];o.sort((n,e)=>n.date>e.date?-1:n.date<e.date?1:n.createdAt>e.createdAt?-1:n.createdAt<e.createdAt?1:0),d(o);const a=(0,P.H9)(H.OO,"users",l.uid),i=(0,P.rJ)(a,"entries");await(0,P.gS)(i,t)},children:"+"})]})]})}}}]);
//# sourceMappingURL=dashboard.66eaf862.chunk.js.map